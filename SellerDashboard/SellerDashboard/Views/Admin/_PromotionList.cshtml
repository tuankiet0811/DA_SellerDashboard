@model IEnumerable<SellerDashboard.Models.Promotion>

<div class="bg-white dark:bg-[#1a2c23] rounded-lg shadow-sm border border-[#e7f3ec] dark:border-[#2a4034] overflow-hidden">
    <div class="p-6 border-b border-[#e7f3ec] dark:border-[#2a4034] flex justify-between items-center">
        <h2 class="text-xl font-bold text-text-main dark:text-white">Khuyến mãi</h2>
        <button onclick="loadCreatePromotion()" class="flex items-center gap-2 rounded-lg bg-primary hover:bg-primary-dark text-white px-4 py-2 text-sm font-medium transition-colors">
            <span class="material-symbols-outlined text-[20px]">add</span>
            Tạo khuyến mãi
        </button>
    </div>
    <div class="overflow-x-auto">
        <table class="w-full text-left text-sm text-text-muted dark:text-gray-400">
            <thead class="bg-[#f6f8f7] dark:bg-[#102218] text-xs uppercase text-text-main dark:text-white font-semibold">
                <tr>
                    <th scope="col" class="px-6 py-3">Tên</th>
                    <th scope="col" class="px-6 py-3">Giảm giá</th>
                    <th scope="col" class="px-6 py-3">Thời gian</th>
                    <th scope="col" class="px-6 py-3">Trạng thái</th>
                    <th scope="col" class="px-6 py-3">Thao tác</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-[#e7f3ec] dark:divide-[#2a4034]">
                @foreach (var item in Model)
                {
                    <tr class="hover:bg-[#f6f8f7] dark:hover:bg-[#102218] transition-colors">
                        <td class="px-6 py-4 font-medium text-text-main dark:text-white">@item.Name</td>
                        <td class="px-6 py-4 text-primary font-bold">@item.DiscountPercent%</td>
                        <td class="px-6 py-4">
                            <div class="text-xs">
                                <div>Bắt đầu: @item.StartDate.ToString("dd/MM/yyyy")</div>
                                <div>Kết thúc: @item.EndDate.ToString("dd/MM/yyyy")</div>
                            </div>
                        </td>
                        <td class="px-6 py-4">
                            @if (item.IsActive && DateTime.Now >= item.StartDate && DateTime.Now <= item.EndDate)
                            {
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400">Đang hoạt động</span>
                            }
                            else
                            {
                                <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-700 dark:text-gray-300">Không hoạt động</span>
                            }
                        </td>
                        <td class="px-6 py-4">
                            <div class="flex items-center gap-3">
                                <button onclick="loadApplyPromotion(@item.Id)" class="text-primary hover:underline font-medium text-xs">Áp dụng</button>
                                <button onclick="loadEditPromotion(@item.Id)" class="text-blue-600 hover:text-blue-800 transition-colors">
                                    <span class="material-symbols-outlined text-[18px]">edit</span>
                                </button>
                                <button onclick="deletePromotion(@item.Id)" class="text-red-600 hover:text-red-800 transition-colors">
                                    <span class="material-symbols-outlined text-[18px]">delete</span>
                                </button>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>
